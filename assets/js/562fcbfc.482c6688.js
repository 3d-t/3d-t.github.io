"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[2204],{996(e,t,i){i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"installation/zwave","title":"Zwave","description":"Integrate Z-Wave devices with SpaceTime using a Z-Wave USB stick and Zwave2MQTT, including setup, subscription, and device control via MQTT.","source":"@site/docs/installation/zwave.md","sourceDirName":"installation","slug":"/installation/zwave","permalink":"/docs/installation/zwave","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7,"description":"Integrate Z-Wave devices with SpaceTime using a Z-Wave USB stick and Zwave2MQTT, including setup, subscription, and device control via MQTT.","keywords":["Z-Wave","Zwave2MQTT","USB stick","home automation","wireless protocol","mesh network","IoT","MQTT","Raspberry Pi","device control"]},"sidebar":"defaultSidebar","previous":{"title":"MQTT","permalink":"/docs/installation/mqtt"},"next":{"title":"Zigbee","permalink":"/docs/installation/zigbee"}}');var n=i(74848),a=i(28453);const o={sidebar_position:7,description:"Integrate Z-Wave devices with SpaceTime using a Z-Wave USB stick and Zwave2MQTT, including setup, subscription, and device control via MQTT.",keywords:["Z-Wave","Zwave2MQTT","USB stick","home automation","wireless protocol","mesh network","IoT","MQTT","Raspberry Pi","device control"]},r="Zwave",c={},d=[{value:"Zwave2MQTT",id:"zwave2mqtt",level:2},{value:"Subscribe",id:"subscribe",level:2},{value:"Publish",id:"publish",level:2}];function l(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"zwave",children:"Zwave"})}),"\n",(0,n.jsxs)(t.p,{children:["Z-Wave is a wireless communications protocol used primarily for home automation. It is a mesh network using low-energy radio waves to communicate from appliance to appliance, allowing for wireless control of residential appliances and other devices, such as lighting control, security systems, thermostats, windows, locks, swimming pools, and garage door openers. For integration of Zwave you need a [Zwave USB stick] (",(0,n.jsx)(t.a,{href:"https://aeotec.com/z-wave-usb-stick/index.html",children:"https://aeotec.com/z-wave-usb-stick/index.html"}),") and one or more devices. The advantage of Zwave compared to Wifi is larger distance and less power consumption. A Zwave sensor can run several years on a single battery."]}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Raspberry PI"}),(0,n.jsx)(t.th,{children:"Zwave stick"}),(0,n.jsx)(t.th,{children:"ZWave device"})]})}),(0,n.jsx)(t.tbody,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.img,{src:i(11569).A+"",width:"1280",height:"753"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.img,{src:i(73029).A+"",width:"500",height:"500"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.img,{src:i(21469).A+"",width:"500",height:"500"})})]})})]}),"\n",(0,n.jsx)(t.h2,{id:"zwave2mqtt",children:"Zwave2MQTT"}),"\n",(0,n.jsxs)(t.p,{children:["For communication with Zwave devices you can use a Raspberry Pi or other computer with a Zwave stick and Zwave2MQTT software, which can be downloaded free of charge.\nFor integration of Zwave connect the stick to a USB port and check the name of the device. Instead of using ",(0,n.jsx)(t.code,{children:"/dev/ttyACM0"})," is it better to use the ",(0,n.jsx)(t.code,{children:"serial/by-id"})," device because this is independent on the USB slot in which the stick is inserted. On a Raspberry Pi this is something like ",(0,n.jsx)(t.code,{children:"/dev/serial/by-id/usb-0658_0200-if00"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["Follow the installation instructions for ",(0,n.jsx)(t.a,{href:"https://github.com/OpenZWave/Zwave2Mqtt",children:"zwave2mqtt"})," or start a docker container:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"docker run --name zwave2mqtt -d -it -p 8091:8091 --device=/dev/serial/by-id/usb-0658_0200-if00 -v /home/pi/zwave2mqtt/store:/usr/src/app/store robertslando/zwave2mqtt:latest\n"})}),"\n",(0,n.jsx)(t.p,{children:"Open a web browser and login:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"http://localhost:8091\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Go to the ",(0,n.jsx)(t.code,{children:"settings"})," section and enter the device ",(0,n.jsx)(t.code,{children:"/dev/serial/by-id/usb-0658_0200-if00"})," in the ",(0,n.jsx)(t.code,{children:"Zwave"})," section. In the ",(0,n.jsx)(t.code,{children:"Mqtt"})," section enter the details of the MQTT host where the data should be sent to and select ",(0,n.jsx)(t.code,{children:"retain"}),". In the ",(0,n.jsx)(t.code,{children:"Gateway"})," section you can map the Zwave device information to MQTT topic."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:i(67324).A+"",width:"1000",height:"755"})}),"\n",(0,n.jsx)(t.h2,{id:"subscribe",children:"Subscribe"}),"\n",(0,n.jsx)(t.p,{children:"The raw MQTT data sent by the Zwave2MQTT service includes a topic and a JSON body with the time and a value:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"mosquitto_sub -h [HOSTNAME] -u [Username] -P [password] -v -t zwave/#\n\n"})}),"\n",(0,n.jsx)(t.p,{children:"The output looks as follows:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:'zwave/office/printer/voltage {"time":1637850956331,"value":226.79}\nzwave/office/lamp/kwh {"time":1637851022338,"value":96.44}\nzwave/office/2/50/1/256 {"time":1637851022343,"value":false}\nzwave/office/pir/temperature {"time":1637850316964,"value":68}\nzwave/office/lamp/on {"time":1637851320475,"value":true}\nzwave/office/lamp/voltage {"time":1637851024324,"value":233.59}\n'})}),"\n",(0,n.jsx)(t.h2,{id:"publish",children:"Publish"}),"\n",(0,n.jsxs)(t.p,{children:["To update an MQTT device you can publish a message to the topic with suffice ",(0,n.jsx)(t.code,{children:"/set"}),". For example, to turn on a lamp you can use the following command:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"mosquitto_sub -h [HOSTNAME] -u [Username] -P [password] -v -t 'zwave/office/lamp/on/set' -m '{\"value\": true}'\n\n"})})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},21469(e,t,i){i.d(t,{A:()=>s});const s=i.p+"assets/images/philio-47becd9449883e8bdcca3fa44cabe394.jpeg"},11569(e,t,i){i.d(t,{A:()=>s});const s=i.p+"assets/images/raspberry-669dd45519e2401535e4ff50ec6c3752.jpg"},67324(e,t,i){i.d(t,{A:()=>s});const s=i.p+"assets/images/zwave2mqtt-ecb9bd046f26eb84786d5d137a500a4f.png"},73029(e,t,i){i.d(t,{A:()=>s});const s=i.p+"assets/images/zwavestick-015f04c0092943d61b97ed94e7149f79.jpeg"},28453(e,t,i){i.d(t,{R:()=>o,x:()=>r});var s=i(96540);const n={},a=s.createContext(n);function o(e){const t=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);