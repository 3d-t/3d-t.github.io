"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[8802],{23461(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"visualization/scaling","title":"Scaling","description":"Apply scaling transformations to GLTF nodes driven by IoT parameters, demonstrated by visualizing battery charge level and suspension height on an electric vehicle model imported from Blender.","source":"@site/docs/visualization/scaling.md","sourceDirName":"visualization","slug":"/visualization/scaling","permalink":"/docs/visualization/scaling","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":42,"frontMatter":{"sidebar_position":42,"description":"Apply scaling transformations to GLTF nodes driven by IoT parameters, demonstrated by visualizing battery charge level and suspension height on an electric vehicle model imported from Blender.","keywords":["scaling","transformation","GLTF","Blender","digital twin","electric vehicle","battery","IoT","3D visualization","node transformation"]},"sidebar":"defaultSidebar","previous":{"title":"Transformation","permalink":"/docs/visualization/transformation"},"next":{"title":"Position","permalink":"/docs/visualization/position"}}');var s=i(74848),o=i(28453);const a={sidebar_position:42,description:"Apply scaling transformations to GLTF nodes driven by IoT parameters, demonstrated by visualizing battery charge level and suspension height on an electric vehicle model imported from Blender.",keywords:["scaling","transformation","GLTF","Blender","digital twin","electric vehicle","battery","IoT","3D visualization","node transformation"]},r="Scaling",c={},l=[{value:"GLTF",id:"gltf",level:2},{value:"Topics",id:"topics",level:2},{value:"Model",id:"model",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"scaling",children:"Scaling"})}),"\n",(0,s.jsx)(n.p,{children:"In this example, we show how you can apply a scaling transformation to visualize the energy state of a battery in a 3D model. Instead of creating a new model from scratch, we show how you can use a model that has been created in other software and imported as a binary GLTF model."}),"\n",(0,s.jsx)(n.h2,{id:"gltf",children:"GLTF"}),"\n",(0,s.jsxs)(n.p,{children:["A schematic visualization of an electric vehicle is created in ",(0,s.jsx)(n.a,{href:"https://www.blender.org",children:"Blender"}),". Blender is free and open source software for rendering, modeling, and animation. The creation of the 3D model is beyond the scope of this documentation but various videos and tutorials can be found online. The electric vehicle model includes a set of 4 wheels and a chassis. The chassis, or body, includes a transparent plate, 4 dampers, and a green battery. It has its own coordinate system named ",(0,s.jsx)(n.code,{children:"Chassis"})," with a translation of 0.5 meters in z-direction. Linked to the chassis is a battery, modeled by a green block, with its own local coordinate system named ",(0,s.jsx)(n.code,{children:"Battery"}),". We will show how the transformations of these coordinate systems can be driven by IoT parameters. After the model is completed it is exported to GLTF 2.0 with name ",(0,s.jsx)(n.code,{children:"ev.glb"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:i(13143).A+"",width:"2460",height:"1674"})}),"\n",(0,s.jsx)(n.h2,{id:"topics",children:"Topics"}),"\n",(0,s.jsxs)(n.p,{children:["The file ",(0,s.jsx)(n.code,{children:"ev.glb"})," is imported via the ",(0,s.jsx)(n.code,{children:"Files"})," menu or it can be uploaded by creating a new topic ",(0,s.jsx)(n.code,{children:"vehicle.A_12_BC.geometry"}),". The topics for the state of ",(0,s.jsx)(n.code,{children:"suspension"})," and ",(0,s.jsx)(n.code,{children:"charge_level"})," can be obtained in real-time via a connector such as for ",(0,s.jsx)(n.a,{href:"/docs/integrations/tesla",children:"Tesla integration"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"vehicle.A_12_BC.geometry=ev.glb\nvehicle.A_12_BC.suspension=0\nvehicle.A_12_BC.charge_level=10\n\nvehicle.A_12_BD.geometry=ev.glb\nvehicle.A_12_BD.suspension=0\nvehicle.A_12_BD.charge_level=10\n...\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Next, we create two topics to link the charge level and suspension to the transformations of the coordinate systems in the GLTF model created in Blender. The link to the transformation in the GLTF is defined by using the prefix ",(0,s.jsx)(n.code,{children:"node"})," followed by the name of the node with the transformation. For example, to raise the suspension with ",(0,s.jsx)(n.code,{children:"0.2 meter"})," and set the charge level to ",(0,s.jsx)(n.code,{children:"80%"})," you can create the following topics:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"vehicle.A_12_BC.node.battery.scale.y=0.8\nvehicle.A_12_BC.node.chassis.position.z=0.2\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Instead of using a fixed number for the node transformations you can also use the value of another topic in combination with any Javascript expression. If the suspension parameter is a range from 0 to 2 you can limit the maximum elevation of the chassis to 20 centimeters by using a ",(0,s.jsx)(n.code,{children:"Math.min()"})," expression."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"vehicle.A_12_BC.node.battery.scale.y=vehicle.A_12_BC.charge_level/100\nvehicle.A_12_BC.node.chassis.position.z=Math.min(vehicle.A_12_BC.suspension / 2)*0.1\n"})}),"\n",(0,s.jsx)(n.h2,{id:"model",children:"Model"}),"\n",(0,s.jsxs)(n.p,{children:["To show the suspension we create a new model and add the topics for the three different vehicles with topics ",(0,s.jsx)(n.code,{children:"vehicel.A_12_BC"}),", ",(0,s.jsx)(n.code,{children:"vehicle.A_12_BD"}),", and ",(0,s.jsx)(n.code,{children:"vehicle.B_12_CF"}),". The image shows three different GLTF models with transformations that set the scale of the battery and the height of the chassis."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:i(14623).A+"",width:"2732",height:"1802"})}),"\n",(0,s.jsx)(n.p,{children:"Using GLTF models to visualize IoT parameters opens new ways to create advanced user interface components. Unlike 2D user interface elements created with HTML, CSS, or SVG these components can visualize values in 3D, or even 4D if you slide across the time range for the parameters."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},13143(e,n,i){i.d(n,{A:()=>t});const t=i.p+"assets/images/modeler_gltf_blender-123fd1201fe47a91c322d5a28643db73.png"},14623(e,n,i){i.d(n,{A:()=>t});const t=i.p+"assets/images/modeler_gltf_vehicle-74828efe8ee68e5f3237f8166ead2755.png"},28453(e,n,i){i.d(n,{R:()=>a,x:()=>r});var t=i(96540);const s={},o=t.createContext(s);function a(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);