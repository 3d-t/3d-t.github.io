"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[2067],{95836(e,i,t){t.r(i),t.d(i,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"installation/zigbee","title":"Zigbee","description":"Set up Zigbee device communication using a USB dongle and Zigbee2MQTT on a Raspberry Pi, including device pairing and MQTT integration.","source":"@site/docs/installation/zigbee.md","sourceDirName":"installation","slug":"/installation/zigbee","permalink":"/docs/installation/zigbee","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8,"description":"Set up Zigbee device communication using a USB dongle and Zigbee2MQTT on a Raspberry Pi, including device pairing and MQTT integration.","keywords":["Zigbee","Zigbee2MQTT","USB dongle","Sonoff","home automation","wireless sensor","mesh network","IoT","Raspberry Pi","MQTT"]},"sidebar":"defaultSidebar","previous":{"title":"Zwave","permalink":"/docs/installation/zwave"},"next":{"title":"Backup","permalink":"/docs/installation/backup"}}');var s=t(74848),o=t(28453);const r={sidebar_position:8,description:"Set up Zigbee device communication using a USB dongle and Zigbee2MQTT on a Raspberry Pi, including device pairing and MQTT integration.",keywords:["Zigbee","Zigbee2MQTT","USB dongle","Sonoff","home automation","wireless sensor","mesh network","IoT","Raspberry Pi","MQTT"]},a="Zigbee",d={},c=[{value:"Zigbee2MQTT",id:"zigbee2mqtt",level:2},{value:"Login",id:"login",level:2},{value:"Pair device",id:"pair-device",level:2},{value:"Test",id:"test",level:2}];function l(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"zigbee",children:"Zigbee"})}),"\n",(0,s.jsx)(i.p,{children:"Zigbee is a wireless communication protocol designed for use in low-power and low-data-rate applications such as home automation, wireless sensor networks, and personal area networks. One of the key features of Zigbee is its low power consumption, which makes it well-suited for use in battery-powered devices. Zigbee devices can run for several years on a single coin cell battery. Zigbee also has a mesh networking capability which allows devices to extend the network by relaying messages through intermediate devices. This allows for creating networks with a large number of devices and providing a reliable communication path even in the case of device failures."}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Raspberry PI"}),(0,s.jsx)(i.th,{children:"Zigbee USB stick"}),(0,s.jsx)(i.th,{children:"Zigbee device"})]})}),(0,s.jsx)(i.tbody,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.img,{src:t(11569).A+"",width:"1280",height:"753"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.img,{src:t(2302).A+"",width:"510",height:"510"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.img,{src:t(39407).A+"",width:"772",height:"579"})})]})})]}),"\n",(0,s.jsx)(i.h2,{id:"zigbee2mqtt",children:"Zigbee2MQTT"}),"\n",(0,s.jsxs)(i.p,{children:["For communication with Zigbee devices you can use a Raspberry Pi or other computer with a ",(0,s.jsx)(i.a,{href:"https://sonoff.tech/product/gateway-and-sensors/sonoff-zigbee-3-0-usb-dongle-plus-e/",children:"Zigbee USB stick"})," and Zigbee2MQTT software, which can be downloaded free of charge.\nCreate a directory ",(0,s.jsx)(i.code,{children:"zigbee2mqtt"})," with a subdirectory ",(0,s.jsx)(i.code,{children:"zigbee2mqtt-data"}),". In the subdirectory create a file ",(0,s.jsx)(i.code,{children:"configuration.yaml"}),":"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"permit_join: true\nmqtt:\n  base_topic: zigbee2mqtt\n  server: mqtt://[HOSTNAME]\n  user: [USERNAME]\n  password: [PASSWORD]\nserial:\n  port: /dev/ttyUSB0\nfrontend:\n  port: 8080\nadvanced:\n  network_key: GENERATE\n"})}),"\n",(0,s.jsx)(i.p,{children:"Find the device for the dongle:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"ls  /dev/serial/by-id/\n\nusb-ITead_Sonoff_Zigbee_3.0_USB_Dongle_Plus_5a045d5b2e86ec11b055571719c2d21c-if00-port0\n"})}),"\n",(0,s.jsx)(i.p,{children:"Start the docker container with the device found for the dongle:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"docker run -d --name zigbee2mqtt --restart=unless-stopped  --device=/dev/serial/by-id/usb-ITead_Sonoff_Zigbee_3.0_USB_Dongle_Plus_5a045d5b2e86ec11b055571719c2d21c-if00-port0:/dev/ttyUSB0 -p 8080:8080  -v /home/devops/zigbee2mqtt/zigbee2mqtt-data:/app/data -v /run/udev:/run/udev:ro  -e TZ=Europe/Amsterdam  koenkk/zigbee2mqtt\n"})}),"\n",(0,s.jsx)(i.h2,{id:"login",children:"Login"}),"\n",(0,s.jsx)(i.p,{children:"Open a web browser to:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"http://[IP_ADDRESS]:8080\n"})}),"\n",(0,s.jsx)(i.h2,{id:"pair-device",children:"Pair device"}),"\n",(0,s.jsx)(i.p,{children:"Insert a paperclip into the reset hole and wait until the green light blinks. The device will automatically be detected."}),"\n",(0,s.jsx)(i.h2,{id:"test",children:"Test"}),"\n",(0,s.jsxs)(i.p,{children:["To control a zigbee device use the topic of the device followed by ",(0,s.jsx)(i.code,{children:"set"}),", for example, to turn of a led strip:"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:'mosquitto_pub -t \'zigbee2mqtt/ledstrip/set\' -m \'{ "state": "OFF" }\'\n mosquitto_pub -h 3d-t.it -u idata -P 5656ae -t \'zigbee2mqtt/ledstrip/set\' -m \'{ "color":{"x":0.0, "y":0.4 }}\'\n\n'})})]})}function h(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},11569(e,i,t){t.d(i,{A:()=>n});const n=t.p+"assets/images/raspberry-669dd45519e2401535e4ff50ec6c3752.jpg"},2302(e,i,t){t.d(i,{A:()=>n});const n=t.p+"assets/images/sonoff-zigbee-11cd83bb00bf24b70749ac013fedea78.jpeg"},39407(e,i,t){t.d(i,{A:()=>n});const n=t.p+"assets/images/zigbee-motion-4a75f693f6ecb6386d1b9113028d4a8b.jpeg"},28453(e,i,t){t.d(i,{R:()=>r,x:()=>a});var n=t(96540);const s={},o=n.createContext(s);function r(e){const i=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),n.createElement(o.Provider,{value:i},e.children)}}}]);