"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[4112],{51794(e,t,i){i.r(t),i.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>l,frontMatter:()=>r,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"drawings/monitoring","title":"Monitoring","description":"Using SVG diagrams for real-time IoT monitoring by connecting MQTT data streams to parametric drawings, demonstrated with a live aircraft flight display dashboard.","source":"@site/docs/drawings/monitoring.md","sourceDirName":"drawings","slug":"/drawings/monitoring","permalink":"/docs/drawings/monitoring","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":220,"frontMatter":{"sidebar_position":220,"description":"Using SVG diagrams for real-time IoT monitoring by connecting MQTT data streams to parametric drawings, demonstrated with a live aircraft flight display dashboard.","keywords":["real-time monitoring","SVG diagrams","MQTT","aircraft monitoring","flight display","IoT visualization","connectors","SpaceTime"]},"sidebar":"defaultSidebar","previous":{"title":"Links","permalink":"/docs/drawings/interactive"},"next":{"title":"Control","permalink":"/docs/drawings/diagrams"}}');var a=i(74848),s=i(28453);const r={sidebar_position:220,description:"Using SVG diagrams for real-time IoT monitoring by connecting MQTT data streams to parametric drawings, demonstrated with a live aircraft flight display dashboard.",keywords:["real-time monitoring","SVG diagrams","MQTT","aircraft monitoring","flight display","IoT visualization","connectors","SpaceTime"]},o="Monitoring",d={},c=[{value:"MQTT",id:"mqtt",level:2},{value:"Connector",id:"connector",level:2},{value:"Diagram",id:"diagram",level:2}];function h(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"monitoring",children:"Monitoring"})}),"\n",(0,a.jsxs)(t.p,{children:["SVG diagrams can be used for real time monitoring and data visualization. In this example we show how to simulate aircraft monitoring by subscribing to messages from an MQTT server that represent the current state of two aircraft with the id ",(0,a.jsx)(t.code,{children:"pdzld"})," and ",(0,a.jsx)(t.code,{children:"phylw"}),". The current state is provided as a comma separated list of six numbers that describe the speed, heading, altitude, selected altitude, pitch and bank angle."]}),"\n",(0,a.jsx)(t.h2,{id:"mqtt",children:"MQTT"}),"\n",(0,a.jsxs)(t.p,{children:["We use the free and open source MQTT client 'mosquitto_pub' to send a message with the state information. The host is the free MQTT host ",(0,a.jsx)(t.code,{children:"broker.hivemq.com"})," and the topic is ",(0,a.jsx)(t.code,{children:"spacetime/aircraft"})," followed by the ID of the aircraft."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:'mosquitto_pub -h broker.hivemq.com -t spacetime/aircraft/phzld -m "70,30, 1000,1300,10,0"\nmosquitto_pub -h broker.hivemq.com -t spacetime/airplane/phylw -m "140,210, 2000,4000,0,10"\n'})}),"\n",(0,a.jsx)(t.h2,{id:"connector",children:"Connector"}),"\n",(0,a.jsxs)(t.p,{children:["To receive the messages we first define a secret to store the information for the MQTT host. The ",(0,a.jsx)(t.code,{children:"type"})," is set to ",(0,a.jsx)(t.code,{children:"MQTT"})," and a free public domain host ",(0,a.jsx)(t.code,{children:"broker.hivemq.com"})," is entered. This host does not need authentication. Then we specify the topic to which we want to subscribe. The ",(0,a.jsx)(t.code,{children:"#"})," sign means that we want to subscribe to all subtopics."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:i(31529).A+"",width:"2400",height:"600"})}),"\n",(0,a.jsxs)(t.p,{children:["Create a new connector and add two object mappings. For each topic define the corresponding mapping to the MQTT topic and then click on ",(0,a.jsx)(t.code,{children:"test"}),". In the data field you can see how the information from the MQTT host is mapped to a JSON object. The topic is stored in the ",(0,a.jsx)(t.code,{children:"object"})," field and the message is stored in the ",(0,a.jsx)(t.code,{children:"data"})," field."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-json",children:'[\n  {\n    "object": "spacetime/airplane/phzld",\n    "data": "70,30,1000,1200,10,0",\n    "time": "2026-01-03T12:52:26.358Z"\n  },\n  {\n    "object": "spacetime/airplane/phylw",\n    "data": "140,210, 2000,4000,0,10",\n    "time": "2026-01-05T14:03:11.676Z"\n  }\n]\n'})}),"\n",(0,a.jsxs)(t.p,{children:["You can map the values in the comma separated list to keys, or sub topics, using the JavaScript ",(0,a.jsx)(t.code,{children:"split"})," function. This converts the string into an array and each value can be retreived via an index in the array. The ",(0,a.jsx)(t.code,{children:"+"})," sign converts the text to a number. After testing the connector set the schedule to ",(0,a.jsx)(t.code,{children:"Continuous"}),". This way the connector is run automatically when new data is received from the MQTT server.\n",(0,a.jsx)(t.img,{src:i(86469).A+"",width:"2400",height:"1300"})]}),"\n",(0,a.jsx)(t.h2,{id:"diagram",children:"Diagram"}),"\n",(0,a.jsx)(t.p,{children:"To connect drawings to topics you can use special subtopics:"}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"topic"}),(0,a.jsx)(t.th,{children:"Description"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"geometry"}),(0,a.jsx)(t.td,{children:"Name of SVG file or drawing with parameters."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"translation"}),(0,a.jsx)(t.td,{children:"Comma separate list of x,y values for positioning the drawing."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"rotation"}),(0,a.jsx)(t.td,{children:"Comma separate list of angle and x,y values for the rotation center point."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"scale"}),(0,a.jsx)(t.td,{children:"Comma separated list of x,y values for scaling the drawing."})]})]})]}),"\n",(0,a.jsxs)(t.p,{children:["For each aircraft add a ",(0,a.jsx)(t.code,{children:"geometry"})," subtopic with the name of the drawing and the parameters. A ",(0,a.jsx)(t.code,{children:"translation"})," subtopic is added to move the origin of the second display next to the first display."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"airplane.phzld.geometry = AIR.PFD(speed, heading, altitude, altSelect, pitch, bank)\nairplane.phylw.geometry = AIR.PFD(speed, heading, altitude, altSelect, pitch, bank)\nairplane.phylw.translation = 350,0\n"})}),"\n",(0,a.jsxs)(t.p,{children:["Create a new ",(0,a.jsx)(t.code,{children:"Diagram"})," and add the topics ",(0,a.jsx)(t.code,{children:"airplane.phzld"})," and ",(0,a.jsx)(t.code,{children:"airplain.phylw"})," to load the topics from the database. In the menu select ",(0,a.jsx)(t.code,{children:"states"})," to see the current values. You can now update the display by sending new MQTT messages or by changing the values in the web browser."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:i(1355).A+"",width:"2400",height:"900"})})]})}function l(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},86469(e,t,i){i.d(t,{A:()=>n});const n=i.p+"assets/images/airplane-1d1fa429ce2b7a6db14aabc70027f733.png"},1355(e,t,i){i.d(t,{A:()=>n});const n=i.p+"assets/images/pfd-aef5e1bed41130cea65a42c1905b072e.png"},31529(e,t,i){i.d(t,{A:()=>n});const n=i.p+"assets/images/mqtt_airplane-c673812c66dcd7ff66eb3ca49e672516.png"},28453(e,t,i){i.d(t,{R:()=>r,x:()=>o});var n=i(96540);const a={},s=n.createContext(a);function r(e){const t=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);