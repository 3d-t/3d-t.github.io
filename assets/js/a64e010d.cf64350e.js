"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9238],{15680:(e,t,n)=>{n.d(t,{xA:()=>p,yg:()=>h});var a=n(96540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),l=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=l(e.components);return a.createElement(c.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},y=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=l(n),y=r,h=u["".concat(c,".").concat(y)]||u[y]||d[y]||o;return n?a.createElement(h,i(i({ref:t},p),{},{components:n})):a.createElement(h,i({ref:t},p))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=y;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[u]="string"==typeof e?e:r,i[1]=s;for(var l=2;l<o;l++)i[l]=n[l];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}y.displayName="MDXCreateElement"},47527:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var a=n(58168),r=(n(96540),n(15680));const o={sidebar_position:50},i="Tuya",s={unversionedId:"integrations/tuya",id:"integrations/tuya",title:"Tuya",description:"Tuya is a provider of smart devices such as LED lamps, power switches and other devices. These devices can be controlled by a Tuya app but Tuya also supports an API for controlling these devices by other applications. The Tuya integration is a bi-directional integration allowing you to read values from sensors and controls switches and lights. The integration is implemented as a Docker web service and uses the open source @tuya/tuya-connector-nodejs package.",source:"@site/docs/integrations/tuya.md",sourceDirName:"integrations",slug:"/integrations/tuya",permalink:"/docs/integrations/tuya",draft:!1,tags:[],version:"current",sidebarPosition:50,frontMatter:{sidebar_position:50},sidebar:"defaultSidebar",previous:{title:"OpenWeather",permalink:"/docs/integrations/openweather"},next:{title:"MQTT",permalink:"/docs/integrations/mqtt"}},c={},l=[{value:"Web service",id:"web-service",level:2},{value:"Datasource",id:"datasource",level:2},{value:"Connector",id:"connector",level:2},{value:"Form",id:"form",level:2},{value:"Wifi and Zigbee",id:"wifi-and-zigbee",level:2}],p={toc:l},u="wrapper";function d(e){let{components:t,...o}=e;return(0,r.yg)(u,(0,a.A)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"tuya"},"Tuya"),(0,r.yg)("p",null,"Tuya is a provider of smart devices such as LED lamps, power switches and other devices. These devices can be controlled by a Tuya app but Tuya also supports an API for controlling these devices by other applications. The Tuya integration is a bi-directional integration allowing you to read values from sensors and controls switches and lights. The integration is implemented as a Docker web service and uses the open source ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/tuya/tuya-connector-nodejs"},"@tuya/tuya-connector-nodejs")," package."),(0,r.yg)("p",null,(0,r.yg)("img",{src:n(68712).A,width:"2732",height:"912"})),(0,r.yg)("h2",{id:"web-service"},"Web service"),(0,r.yg)("p",null,"To install the Tuya web service on your local cluster run: "),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"helm install 3d-t/tuya tuya\n")),(0,r.yg)("h2",{id:"datasource"},"Datasource"),(0,r.yg)("p",null,"For the Tuya service you need an access key and a secretKey. You can obtain these keys via a free registration as a Tuya cloud developer. In the field ",(0,r.yg)("inlineCode",{parentName:"p"},"service")," enter the hostname of where the Tuya webservice is running locally. The field ",(0,r.yg)("inlineCode",{parentName:"p"},"baseUrl")," specifies the data center where your devices are registered. "),(0,r.yg)("p",null,(0,r.yg)("img",{src:n(95139).A,width:"2732",height:"1122"})),(0,r.yg)("h2",{id:"connector"},"Connector"),(0,r.yg)("p",null,"In the connector specify the secret that contains the Tuya data source and add a mapping for each device. The object ID is the ID of the device, which can be obtained via the Tuya app or developer web site. The mapping for the color maps a JSON object ",(0,r.yg)("inlineCode",{parentName:"p"},"{h: <number>, s:<number>, v:<number>}")," to the internal color representation of an array of three numbers."),(0,r.yg)("p",null,(0,r.yg)("img",{src:n(91036).A,width:"2732",height:"1802"})),(0,r.yg)("p",null,"The exporter maps the intenal value of ",(0,r.yg)("inlineCode",{parentName:"p"},"0")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"1")," for the switch to the values ",(0,r.yg)("inlineCode",{parentName:"p"},"switch_1: true")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"switch_1: false"),". The interal color definition of an array of three numbers representing hue, saturation and brightness is converted to a JSON object ",(0,r.yg)("inlineCode",{parentName:"p"},"{h: 100, s: 200, v: 300}")," for the field ",(0,r.yg)("inlineCode",{parentName:"p"},"colour_data"),"."),(0,r.yg)("h2",{id:"form"},"Form"),(0,r.yg)("p",null,"To test changing the color of a Tuya enabled light bulb create the following form:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"Reception panel\n\nled.color:Color\n|12\n")),(0,r.yg)("p",null,"Search for item ",(0,r.yg)("inlineCode",{parentName:"p"},"office.htc.reception")," and click on the item. If you change the color on the color wheel the color of the light should change."),(0,r.yg)("h2",{id:"wifi-and-zigbee"},"Wifi and Zigbee"),(0,r.yg)("p",null,"By default Tuya supports devices via WiFi but this is less suited for battery operated devices such as motion detectors or temperature sensors. Zigbee offers a more energy efficient alternative to WiFi. You can integrate Zigbee devices within Tuya via a ",(0,r.yg)("a",{parentName:"p",href:"https://expo.tuya.com/product/939049"},"Tuya Zigbee gateway"),". First register the Gateway with the Tuya App by connecting to the Gateway to a LAN. Make sure you enable the local network in the app, otherwise the gateway will not be discovered. After the gateway is installed you can add Zigbee 3.0 devices. When these are set in pairing mode they can automatically be discovered via the Tuya app."))}d.isMDXComponent=!0},91036:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/connector_tuya-3f7029ce67bc99611cd01fe1fec3319c.png"},68712:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/item_reception-dfa95b61cbc14272da2cc22f80c24a26.png"},95139:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/secret_tuya-f43d6fe7139a0be46a3d5d4e4f5b298e.png"}}]);