"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[8739],{38722(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"visualization/transformation","title":"Transformation","description":"Apply translation and rotation transformations to GLTF nodes using IoT-driven JavaScript expressions, demonstrated with a crane whose arm angle and extension are controlled by topic values.","source":"@site/docs/visualization/transformation.md","sourceDirName":"visualization","slug":"/visualization/transformation","permalink":"/docs/visualization/transformation","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":40,"frontMatter":{"sidebar_position":40,"description":"Apply translation and rotation transformations to GLTF nodes using IoT-driven JavaScript expressions, demonstrated with a crane whose arm angle and extension are controlled by topic values.","keywords":["transformation","rotation","translation","GLTF","digital twin","crane","JavaScript expressions","IoT","3D visualization","geometric constraints"]},"sidebar":"defaultSidebar","previous":{"title":"Visibility","permalink":"/docs/visualization/visibile"},"next":{"title":"Scaling","permalink":"/docs/visualization/scaling"}}');var a=t(74848),i=t(28453);const s={sidebar_position:40,description:"Apply translation and rotation transformations to GLTF nodes using IoT-driven JavaScript expressions, demonstrated with a crane whose arm angle and extension are controlled by topic values.",keywords:["transformation","rotation","translation","GLTF","digital twin","crane","JavaScript expressions","IoT","3D visualization","geometric constraints"]},r="Transformation",c={},d=[{value:"Solids",id:"solids",level:2},{value:"Topics",id:"topics",level:2},{value:"Model",id:"model",level:2},{value:"Explanation",id:"explanation",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",mermaid:"mermaid",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"transformation",children:"Transformation"})}),"\n",(0,a.jsx)(n.p,{children:"In this section, we explain how you can apply transformations to 3D objects and how you can use expressions to implement geometric constraints between nodes in a GLTF model.  Transformations on 3D objects can be used to visualize the state of an object depending on IoT parameters. For example, you can show the location of an elevator in a building or the position of the arm of a robot in a factory."}),"\n",(0,a.jsx)(n.h2,{id:"solids",children:"Solids"}),"\n",(0,a.jsxs)(n.p,{children:["This example shows how IoT parameters stored in topics can be used to translate and rotate objects in a small crane, or cherry picker. The body of the crane is constructed from a block and a raised cylinder near the edge as shown below. The two objects are shrink-wrapped into a new body using the ",(0,a.jsx)(n.code,{children:"Hull"})," operation."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:t(76554).A+"",width:"1200",height:"750"})}),"\n",(0,a.jsxs)(n.p,{children:["The crane object includes a part ",(0,a.jsx)(n.code,{children:"Arm"})," that can be rotated in two directions and that can be extended so that the grey inner shaft moves out of the yellow outer shaft. The ",(0,a.jsx)(n.code,{children:"Basket"})," is included as a part in the ",(0,a.jsx)(n.code,{children:"Extension"}),"."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:t(81e3).A+"",width:"1200",height:"750"})}),"\n",(0,a.jsx)(n.h2,{id:"topics",children:"Topics"}),"\n",(0,a.jsx)(n.p,{children:"The example shows how you can control the angle and extension of the arm. First, we create a topic to link to the GLTF file, a topic to set the angle of the arm, and a topic to set the extension."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"crane.T01.geometry = Crane.gltf\ncrane.T01.angle = 0\ncrane.T01.extension = 0\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Next, we create two topics to control the extension of the arm. The first topic links to the node that controls the extension. The second topic sets a constraint on the maximum extension to ",(0,a.jsx)(n.code,{children:"3"})," units, by using the JavaScript ",(0,a.jsx)(n.code,{children:"Math.min()"})," function."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"crane.T01.extension.node = Extension\ncrane.T01.extension.translation.y = Math.min(3, crane.T01.extension)\n"})}),"\n",(0,a.jsxs)(n.p,{children:["For the rotation of the arm we link the rotation in z-direction to the ",(0,a.jsx)(n.code,{children:"angle"})," topic of the crane. Note that if the arm rotates in one direction, the basket should rotate in the opposite direction to ensure it stays horizontal."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"crane.T01.arm.node = Arm\ncrane.T01.arm.rotation.z = crane.T01.angle\ncrane.T01.basket.node = Basket\ncrane.T01.basket.rotation.z = -crane.T01.angle\n"})}),"\n",(0,a.jsxs)(n.p,{children:["You can now control the crane by setting the value of the ",(0,a.jsx)(n.code,{children:"extension"})," and ",(0,a.jsx)(n.code,{children:"angle"})," topics."]}),"\n",(0,a.jsx)(n.h2,{id:"model",children:"Model"}),"\n",(0,a.jsxs)(n.p,{children:["Create a new model and include the topic for the crane. If you click on the crane a list of topics is displayed. To change the value of the topics click on the ",(0,a.jsx)(n.code,{children:"edit"})," icon, set the values, and click ",(0,a.jsx)(n.code,{children:"update"}),"."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:t(28718).A+"",width:"1200",height:"750"})}),"\n",(0,a.jsx)(n.h2,{id:"explanation",children:"Explanation"}),"\n",(0,a.jsx)(n.p,{children:"A GLTF model has an internal hierarchy, a so-called tree of nodes. When applying a translation or rotation to a node all child nodes are translated or rotated as well. For example, when a translation is applied to the whole model is moved. When a rotation is applied to the arm, the extension and basket are also rotated because they are part of the arm."}),"\n",(0,a.jsx)(n.mermaid,{value:"flowchart \n    direction TB\n    subgraph Topics\n        Crane[crane.T01]\n        Arm[.arm]\n        Extension[.extension]\n        Crane --\x3e Arm\n        Crane --\x3e Extension\n        Crane --\x3e Basket[.basket]\n        Arm --\x3e Rotation[.rotation.z]\n        Extension --\x3e Translation[.translation.y]\n        Basket --\x3e RotationB[.rotation.z]\n    end\n    subgraph GLTF\n        direction TB\n        GLTFCrane[Crane]\n        GLTFArm[Arm]\n        GLTFExtension[Extension]\n        GLTFBasket[Basket]\n        GLTFCrane --\x3e GLTFArm\n        GLTFArm --\x3e GLTFExtension\n        GLTFExtension --\x3e GLTFBasket\n    end\n    Translation --\x3e GLTFExtension\n    Rotation --\x3e GLTFArm\n    RotationB --\x3e GLTFBasket"})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},28718(e,n,t){t.d(n,{A:()=>o});const o=t.p+"assets/images/visualization_model_crane-565fdaf80ea563ca079082179b834297.png"},81e3(e,n,t){t.d(n,{A:()=>o});const o=t.p+"assets/images/visualization_solid_crane-d5cde48d585c6b7f1a4b1cb6264fa379.png"},76554(e,n,t){t.d(n,{A:()=>o});const o=t.p+"assets/images/visualization_solid_hull-2455ef1cd7b961fda4b3c3b901796870.png"},28453(e,n,t){t.d(n,{R:()=>s,x:()=>r});var o=t(96540);const a={},i=o.createContext(a);function s(e){const n=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);