"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1576],{15680:(e,n,t)=>{t.d(n,{xA:()=>p,yg:()=>g});var a=t(96540);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var i=a.createContext({}),c=function(e){var n=a.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=c(e.components);return a.createElement(i.Provider,{value:n},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,i=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(t),m=r,g=u["".concat(i,".").concat(m)]||u[m]||d[m]||l;return t?a.createElement(g,o(o({ref:n},p),{},{components:t})):a.createElement(g,o({ref:n},p))}));function g(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,o=new Array(l);o[0]=m;var s={};for(var i in n)hasOwnProperty.call(n,i)&&(s[i]=n[i]);s.originalType=e,s[u]="string"==typeof e?e:r,o[1]=s;for(var c=2;c<l;c++)o[c]=t[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},25485:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>o,default:()=>d,frontMatter:()=>l,metadata:()=>s,toc:()=>c});var a=t(58168),r=(t(96540),t(15680));const l={sidebar_position:3},o="Releases",s={unversionedId:"installation/releases",id:"installation/releases",title:"Releases",description:"If you have a Kubernetes installation running you can install and upgrade releases. The only mandatory components are the Mongo database, the server and the web application. Other components such as for web crawling and for connecting to external services are optional and can be added in a later stage. The installation is automated via helm charts.",source:"@site/docs/installation/releases.md",sourceDirName:"installation",slug:"/installation/releases",permalink:"/docs/installation/releases",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"defaultSidebar",previous:{title:"Kubernetes",permalink:"/docs/installation/kubernetes"},next:{title:"External access via SSL",permalink:"/docs/installation/ingress"}},i={},c=[{value:"Helm",id:"helm",level:2},{value:"Install",id:"install",level:2},{value:"Upgrade",id:"upgrade",level:2},{value:"Rollback",id:"rollback",level:2},{value:"Uninstall",id:"uninstall",level:2}],p={toc:c},u="wrapper";function d(e){let{components:n,...t}=e;return(0,r.yg)(u,(0,a.A)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"releases"},"Releases"),(0,r.yg)("p",null,"If you have a Kubernetes installation running you can install and upgrade releases. The only mandatory components are the Mongo database, the server and the web application. Other components such as for web crawling and for connecting to external services are optional and can be added in a later stage. The installation is automated via helm charts. "),(0,r.yg)("h2",{id:"helm"},"Helm"),(0,r.yg)("p",null,"Helm is a package manager for Kubernetes. Check if helm is installed: "),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"helm list\nNAME        NAMESPACE   REVISION    UPDATED                                 STATUS      CHART       APP VERSION\nspacetime   default     3           2025-01-28 16:34:38.899921893 +0100 CET deployed    core-1.3.3  latest     \ntuya        default     2           2025-01-10 11:36:18.441962258 +0100 CET deployed    tuya-1.3.1  latest     \n")),(0,r.yg)("p",null,"If helm is not installed run the following command."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"curl https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3 | bash\n")),(0,r.yg)("h2",{id:"install"},"Install"),(0,r.yg)("p",null,"Add the helm repository with information about the spacetime helm charts:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"helm repo add spacetime https://charts.spacetime.engineer\n")),(0,r.yg)("p",null,"You can now view the available releases in the repository:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"helm search repo spacetime\nNAME            CHART VERSION   APP VERSION DESCRIPTION                   \nspacetime/core  1.3.1           latest      Digital Twin as a service           \nspacetime/forms     1.3.1           latest      Inspection and device control       \nspacetime/modeler   1.3.1           latest      Solid modeler for 3D-T visualization\nspacetime/mongo     4.4.0           4.4         3d-t mongo database standalone      \nspacetime/portal    1.3.1           latest      Portal for 3D-T apps                \nspacetime/server    1.3.1           latest      Server back-end                     \nspacetime/tuya      0.1.1           latest      Tuya API  \n")),(0,r.yg)("p",null,"To install the core spacetime modules:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"helm install spacetime spacetime/core\n")),(0,r.yg)("p",null,"You can check the deployment by the following Kubernetes command:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"kubectl get pods\nNAME                      READY   STATUS    RESTARTS   AGE\nforms-9bd7dd556-8v9js     1/1     Running   0          4m53s\nmodeler-cf7b9794f-s5nfc   1/1     Running   0          4m53s\nmongo-0                   1/1     Running   0          25m\nportal-5b8b8899c5-sxthg   1/1     Running   0          4m53s\nserver-54675c8865-xr7jl   1/1     Running   0          4m52s\n")),(0,r.yg)("p",null,"Wait until all services are running and then check if the services are deployed:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"kubectl get svc\nNAME         TYPE           CLUSTER-IP      EXTERNAL-IP     PORT(S)          AGE\nforms        LoadBalancer   10.43.8.171     192.168.0.176   3002:30338/TCP   101s\nkubernetes   ClusterIP      10.43.0.1       <none>          443/TCP          3d1h\nmodeler      LoadBalancer   10.43.55.161    192.168.0.176   3005:31719/TCP   101s\nmongo        ClusterIP      10.43.206.235   <none>          27017/TCP        101s\nportal       LoadBalancer   10.43.107.54    192.168.0.176   3000:30620/TCP   101s\nserver       LoadBalancer   10.43.241.189   192.168.0.176   8010:30971/TCP   101s\n")),(0,r.yg)("p",null,"Open a web browser to the portal service:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"http://localhost:3000 // If kubernetes is running on your local system\nhttp://<HOSTNAME>:3000 // If kubernetes is running on another host\n")),(0,r.yg)("p",null,"After testing the local setup you can expose the spacetime environment externally using a secure connection as explained in the next section."),(0,r.yg)("h2",{id:"upgrade"},"Upgrade"),(0,r.yg)("p",null,"Before you upgrade to a new release make sure you update the repository with helm charts so that you are working with the latest version of the charts."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"helm repo update\nhelm upgrade spacetime spacetime/core\n")),(0,r.yg)("p",null,"This completes the minimal installation. You can proceed with optional additional configuration or login and start the ",(0,r.yg)("a",{parentName:"p",href:"/docs/tutorial/registration"},"Registration")," section of the tutorial."),(0,r.yg)("h2",{id:"rollback"},"Rollback"),(0,r.yg)("p",null,"To rollback, first list the installed versions:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"helm history spacetime\nREVISION    UPDATED                     STATUS      CHART       APP VERSION DESCRIPTION     \n1           Tue Jan 28 14:51:59 2025    superseded  core-1.3.3  latest      Install complete\n2           Tue Jan 28 15:06:03 2025    superseded  core-1.3.3  latest      Upgrade complete\n3           Tue Jan 28 16:34:38 2025    deployed    core-1.3.3  latest      Upgrade complete\n")),(0,r.yg)("p",null,"You can now rollback by entering the revision number:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"helm rollback <REVISION>\n")),(0,r.yg)("h2",{id:"uninstall"},"Uninstall"),(0,r.yg)("p",null,"If you want to install from scratch you can remove the current installation."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"helm uninstall spacetime \n")),(0,r.yg)("p",null,"This does not automatically delete the database. To delete the database:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"kubectl delete pvc data-mongo-0\n")))}d.isMDXComponent=!0}}]);