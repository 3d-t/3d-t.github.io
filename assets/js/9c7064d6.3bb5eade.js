"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[290],{94735(e,i,n){n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>r});const t=JSON.parse('{"id":"visualization/animations","title":"Animation","description":"Use built-in GLTF animation capabilities to create rotating or moving objects driven by real-time IoT parameters, such as a windmill whose speed and direction respond to live weather data.","source":"@site/docs/visualization/animations.md","sourceDirName":"visualization","slug":"/visualization/animations","permalink":"/docs/visualization/animations","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":100,"frontMatter":{"sidebar_position":100,"description":"Use built-in GLTF animation capabilities to create rotating or moving objects driven by real-time IoT parameters, such as a windmill whose speed and direction respond to live weather data.","keywords":["animation","GLTF","digital twin","windmill","IoT","real-time","3D visualization","rotation","OpenWeather","timeScale"]},"sidebar":"defaultSidebar","previous":{"title":"Location","permalink":"/docs/visualization/location"},"next":{"title":"Structure","permalink":"/docs/twin/structure"}}');var a=n(74848),o=n(28453);const s={sidebar_position:100,description:"Use built-in GLTF animation capabilities to create rotating or moving objects driven by real-time IoT parameters, such as a windmill whose speed and direction respond to live weather data.",keywords:["animation","GLTF","digital twin","windmill","IoT","real-time","3D visualization","rotation","OpenWeather","timeScale"]},d="Animation",l={},r=[{value:"Solids",id:"solids",level:2},{value:"Topics",id:"topics",level:2},{value:"Model",id:"model",level:2},{value:"Explanation",id:"explanation",level:2}];function c(e){const i={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",mermaid:"mermaid",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.header,{children:(0,a.jsx)(i.h1,{id:"animation",children:"Animation"})}),"\n",(0,a.jsx)(i.p,{children:"So far we have seen how we can set the shape and geometry of 3D objects based on IoT parameters. In this example, we use the built-in animation capabilities to create a rotating windmill on a 3D map. The direction of the windmill and rotation speed are based on real-time weather parameters."}),"\n",(0,a.jsx)(i.h2,{id:"solids",children:"Solids"}),"\n",(0,a.jsxs)(i.p,{children:["The axis of the rotor is created by a cylinder and a sphere, which are rotated 90 degrees along the X-axis. The blade is created by a cone with a bottom diameter of ",(0,a.jsx)(i.code,{children:"2"})," and a top diameter of ",(0,a.jsx)(i.code,{children:"0.5"}),". The cone is scaled to simulate a flat rotor blade and it has a variable rotation defined by parameter ",(0,a.jsx)(i.code,{children:"angle"}),"."]}),"\n",(0,a.jsx)(i.p,{children:(0,a.jsx)(i.img,{src:n(95307).A+"",width:"1200",height:"750"})}),"\n",(0,a.jsxs)(i.p,{children:["The windmill pole is created by a cone and the rotor is attached to the top, together with a box and a flashlight. The rotor is placed inside an animation block which rotates the part along the Y-axis in a number of seconds. The parameter ",(0,a.jsx)(i.code,{children:"seconds"})," is calculated from the parameter ",(0,a.jsx)(i.code,{children:"windspeed"})," and the parameter ",(0,a.jsx)(i.code,{children:"direction"})," is used to rotate the whole part."]}),"\n",(0,a.jsx)(i.p,{children:(0,a.jsx)(i.img,{src:n(66839).A+"",width:"1200",height:"750"})}),"\n",(0,a.jsx)(i.h2,{id:"topics",children:"Topics"}),"\n",(0,a.jsxs)(i.p,{children:["We can now link a topic to control the animation defined in the GLTF model created by the solid. The animations are named sequentially ",(0,a.jsx)(i.code,{children:"animation_1"}),", ",(0,a.jsx)(i.code,{children:"animation_2"}),", etc. The topic ",(0,a.jsx)(i.code,{children:"windmill.A01.B.animation"})," contains the name of the animation and the sibling topic ",(0,a.jsx)(i.code,{children:"speed"})," defines the speed multiplier for the animation. For example, if ",(0,a.jsx)(i.code,{children:"0.5"})," the animation of the rotor rotates at 50% of the speed defined in the solid."]}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{children:"windmill.A01.A.geometry = Windmill.gltf\nwindmill.A01.B.geometry = Windmill.gltf\nwindmill.A01.B.animation = animation_1\nwindmill.A01.B.speed = 2\nwindmill.A01.B.rotation = 0,0,90\n"})}),"\n",(0,a.jsx)(i.p,{children:"Instead of setting the speed manually, you can also enter a JavaScript expression that sets the speed depending on the actual wind speed obtained via a connector to OpenWeather. For example, the expression below sets the speed of the rotor to 10% of the wind speed with a maximum of 5."}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{children:"windmill.A01.B.speed = Math.max(weather.amsterdam.windspeed/10, 5)\n"})}),"\n",(0,a.jsx)(i.h2,{id:"model",children:"Model"}),"\n",(0,a.jsx)(i.p,{children:"A model is created by including the topics for the dike and the two windmills. If you click on the windmill you can edit the value of the topics to control the direction and speed of the rotor."}),"\n",(0,a.jsx)(i.p,{children:(0,a.jsx)(i.img,{src:n(58333).A+"",width:"1200",height:"750"})}),"\n",(0,a.jsx)(i.p,{children:"The chart below shows how the topics and subtopics are linked to the nodes in the GLTF model."}),"\n",(0,a.jsx)(i.h2,{id:"explanation",children:"Explanation"}),"\n",(0,a.jsxs)(i.p,{children:["A GLTF model contains a scene with a 3D object and a list of animations. Each animation has a name and associated data such as a list of times and transformations (keyframes) and a parameter ",(0,a.jsx)(i.code,{children:"timeScale"}),". In this example, we set the ",(0,a.jsx)(i.code,{children:"timeScale"})," variable of the animation with a name defined in the ",(0,a.jsx)(i.code,{children:".animation"}),". The ",(0,a.jsx)(i.code,{children:"timeScale"})," value is set by defining a sibling topic ",(0,a.jsx)(i.code,{children:"speed"}),". When the speed is ",(0,a.jsx)(i.code,{children:"1"})," the animation runs at the original speed."]}),"\n",(0,a.jsx)(i.mermaid,{value:"flowchart \n    direction TB\n    subgraph Topics\n        WindmillA[windmill.A01.A]\n        WindmillA --\x3e GeometryA[.geometry \\n Windmill.gltf]\n        WindmillB[windmill.A01.B]\n        WindmillB --\x3e Geometry[.geometry \\n Windmill.gltf]\n        WindmillB --\x3e Animation[.animation \\n animation_1]\n        WindmillB --\x3e Speed[.speed\\n 2]\n    end\n    subgraph GLTF\n        direction TB\n        Gltf --\x3e Scene\n        Scene --\x3e GLTFWindmill[Windmill]\n        Gltf --\x3e Animations --\x3e Actions\n        Actions[Action\\nanimation_1] --\x3e timeScale \n    end\n    Geometry --\x3e Gltf\n    GeometryA --\x3e Gltf\n    Speed --\x3e timeScale "})]})}function h(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,a.jsx)(i,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},58333(e,i,n){n.d(i,{A:()=>t});const t=n.p+"assets/images/visualization_model_windmill-735d0b40c37ef043e13424f73f13262b.png"},95307(e,i,n){n.d(i,{A:()=>t});const t=n.p+"assets/images/visualization_solid_rotor-a504df5b7787d01a3b582f376ecc4f71.png"},66839(e,i,n){n.d(i,{A:()=>t});const t=n.p+"assets/images/visualization_solid_windmill-ebd64455529486632312bebdddf599c8.png"},28453(e,i,n){n.d(i,{R:()=>s,x:()=>d});var t=n(96540);const a={},o=t.createContext(a);function s(e){const i=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function d(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),t.createElement(o.Provider,{value:i},e.children)}}}]);