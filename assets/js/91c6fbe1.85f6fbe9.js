"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[1576],{62856(e,n,t){t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"installation/releases","title":"Releases","description":"Install, upgrade, rollback, and uninstall SpaceTime releases on Kubernetes using Helm charts, including core components like MongoDB, server, and web applications.","source":"@site/docs/installation/releases.md","sourceDirName":"installation","slug":"/installation/releases","permalink":"/docs/installation/releases","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"description":"Install, upgrade, rollback, and uninstall SpaceTime releases on Kubernetes using Helm charts, including core components like MongoDB, server, and web applications.","keywords":["Helm","releases","install","upgrade","rollback","uninstall","Helm charts","deployment","Kubernetes","microservices"]},"sidebar":"defaultSidebar","previous":{"title":"Kubernetes","permalink":"/docs/installation/kubernetes"},"next":{"title":"External access via SSL","permalink":"/docs/installation/ingress"}}');var l=t(74848),a=t(28453);const r={sidebar_position:3,description:"Install, upgrade, rollback, and uninstall SpaceTime releases on Kubernetes using Helm charts, including core components like MongoDB, server, and web applications.",keywords:["Helm","releases","install","upgrade","rollback","uninstall","Helm charts","deployment","Kubernetes","microservices"]},o="Releases",i={},c=[{value:"Helm",id:"helm",level:2},{value:"Install",id:"install",level:2},{value:"Upgrade",id:"upgrade",level:2},{value:"Rollback",id:"rollback",level:2},{value:"Uninstall",id:"uninstall",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"releases",children:"Releases"})}),"\n",(0,l.jsx)(n.p,{children:"If you have a Kubernetes installation running you can install and upgrade releases. The only mandatory components are the Mongo database, the server and the web application. Other components such as for web crawling and for connecting to external services are optional and can be added in a later stage. The installation is automated via helm charts."}),"\n",(0,l.jsx)(n.h2,{id:"helm",children:"Helm"}),"\n",(0,l.jsx)(n.p,{children:"Helm is a package manager for Kubernetes. Check if helm is installed:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"helm list\nNAME     \tNAMESPACE\tREVISION\tUPDATED                                \tSTATUS  \tCHART     \tAPP VERSION\nspacetime\tdefault  \t3       \t2025-01-28 16:34:38.899921893 +0100 CET\tdeployed\tcore-1.3.3\tlatest     \ntuya     \tdefault  \t2       \t2025-01-10 11:36:18.441962258 +0100 CET\tdeployed\ttuya-1.3.1\tlatest     \n"})}),"\n",(0,l.jsx)(n.p,{children:"If helm is not installed run the following command."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"curl https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3 | bash\n"})}),"\n",(0,l.jsx)(n.h2,{id:"install",children:"Install"}),"\n",(0,l.jsx)(n.p,{children:"Add the helm repository with information about the spacetime helm charts:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"helm repo add spacetime https://charts.spacetime.engineer\n"})}),"\n",(0,l.jsx)(n.p,{children:"You can now view the available releases in the repository:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"helm search repo spacetime\nNAME        \tCHART VERSION\tAPP VERSION\tDESCRIPTION                   \nspacetime/core\t1.3.1        \tlatest     \tDigital Twin as a service           \nspacetime/forms    \t1.3.1        \tlatest     \tInspection and device control       \nspacetime/modeler  \t1.3.1        \tlatest     \tSolid modeler for 3D-T visualization\nspacetime/mongo    \t4.4.0        \t4.4        \t3d-t mongo database standalone      \nspacetime/portal   \t1.3.1        \tlatest     \tPortal for 3D-T apps                \nspacetime/server   \t1.3.1        \tlatest     \tServer back-end                     \nspacetime/tuya     \t0.1.1        \tlatest     \tTuya API  \n"})}),"\n",(0,l.jsx)(n.p,{children:"To install the core spacetime modules:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"helm install spacetime spacetime/core\n"})}),"\n",(0,l.jsx)(n.p,{children:"You can check the deployment by the following Kubernetes command:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"kubectl get pods\nNAME                      READY   STATUS    RESTARTS   AGE\nforms-9bd7dd556-8v9js     1/1     Running   0          4m53s\nmodeler-cf7b9794f-s5nfc   1/1     Running   0          4m53s\nmongo-0                   1/1     Running   0          25m\nportal-5b8b8899c5-sxthg   1/1     Running   0          4m53s\nserver-54675c8865-xr7jl   1/1     Running   0          4m52s\n"})}),"\n",(0,l.jsx)(n.p,{children:"Wait until all services are running and then check if the services are deployed:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"kubectl get svc\nNAME         TYPE           CLUSTER-IP      EXTERNAL-IP     PORT(S)          AGE\nforms        LoadBalancer   10.43.8.171     192.168.0.176   3002:30338/TCP   101s\nkubernetes   ClusterIP      10.43.0.1       <none>          443/TCP          3d1h\nmodeler      LoadBalancer   10.43.55.161    192.168.0.176   3005:31719/TCP   101s\nmongo        ClusterIP      10.43.206.235   <none>          27017/TCP        101s\nportal       LoadBalancer   10.43.107.54    192.168.0.176   3000:30620/TCP   101s\nserver       LoadBalancer   10.43.241.189   192.168.0.176   8010:30971/TCP   101s\n"})}),"\n",(0,l.jsx)(n.p,{children:"Open a web browser to the portal service:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"http://localhost:3000 // If kubernetes is running on your local system\nhttp://<HOSTNAME>:3000 // If kubernetes is running on another host\n"})}),"\n",(0,l.jsx)(n.p,{children:"After testing the local setup you can expose the spacetime environment externally using a secure connection as explained in the next section."}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Note: Google Chrome does not allow unsecure connections over http to another server on your internal network. You can add a trusted site in the chrome settings or use another browser."}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"upgrade",children:"Upgrade"}),"\n",(0,l.jsx)(n.p,{children:"Before you upgrade to a new release make sure you update the repository with helm charts so that you are working with the latest version of the charts."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"helm repo update\nhelm upgrade spacetime spacetime/core\n"})}),"\n",(0,l.jsxs)(n.p,{children:["This completes the minimal installation. You can proceed with optional additional configuration or login and start the ",(0,l.jsx)(n.a,{href:"/docs/tutorial/registration",children:"Registration"})," section of the tutorial."]}),"\n",(0,l.jsx)(n.h2,{id:"rollback",children:"Rollback"}),"\n",(0,l.jsx)(n.p,{children:"To rollback, first list the installed versions:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"helm history spacetime\nREVISION\tUPDATED                 \tSTATUS    \tCHART     \tAPP VERSION\tDESCRIPTION     \n1       \tTue Jan 28 14:51:59 2025\tsuperseded\tcore-1.3.3\tlatest     \tInstall complete\n2       \tTue Jan 28 15:06:03 2025\tsuperseded\tcore-1.3.3\tlatest     \tUpgrade complete\n3       \tTue Jan 28 16:34:38 2025\tdeployed  \tcore-1.3.3\tlatest     \tUpgrade complete\n"})}),"\n",(0,l.jsx)(n.p,{children:"You can now rollback by entering the revision number:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"helm rollback <REVISION>\n"})}),"\n",(0,l.jsx)(n.h2,{id:"uninstall",children:"Uninstall"}),"\n",(0,l.jsx)(n.p,{children:"If you want to install from scratch you can remove the current installation."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"helm uninstall spacetime \n"})}),"\n",(0,l.jsx)(n.p,{children:"This does not automatically delete the database. To delete the database:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"kubectl delete pvc data-mongo-0\n"})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},28453(e,n,t){t.d(n,{R:()=>r,x:()=>o});var s=t(96540);const l={},a=s.createContext(l);function r(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);