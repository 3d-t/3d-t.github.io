(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2391],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return l},kt:function(){return h}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=r.createContext({}),s=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},l=function(e){var t=s(e.components);return r.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,l=u(e,["components","mdxType","originalType","parentName"]),d=s(n),h=o,f=d["".concat(c,".").concat(h)]||d[h]||p[h]||a;return n?r.createElement(f,i(i({ref:t},l),{},{components:n})):r.createElement(f,i({ref:t},l))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=d;var u={};for(var c in t)hasOwnProperty.call(t,c)&&(u[c]=t[c]);u.originalType=e,u.mdxType="string"==typeof e?e:o,i[1]=u;for(var s=2;s<a;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6573:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return u},contentTitle:function(){return c},metadata:function(){return s},toc:function(){return l},default:function(){return d}});var r=n(2122),o=n(9756),a=(n(7294),n(3905)),i=["components"],u={sidebar_position:2},c="Authorization",s={unversionedId:"api/authorization",id:"api/authorization",isDocsHomePage:!1,title:"Authorization",description:"Authorization of the API is implemented with JWT (Jason Web Tokens). To request a token you can use the Swagger API documentation. Click on the login section and select Try out. In the request body enter the credentials. Make sure you quote the keys and the values.",source:"@site/docs/api/authorization.md",sourceDirName:"api",slug:"/api/authorization",permalink:"/docs/api/authorization",version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"defaultSidebar",previous:{title:"Documentation",permalink:"/docs/api/intro"},next:{title:"Form controls",permalink:"/docs/reference/forms"}},l=[{value:"Curl",id:"curl",children:[]}],p={toc:l};function d(e){var t=e.components,u=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},p,u,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"authorization"},"Authorization"),(0,a.kt)("p",null,"Authorization of the API is implemented with JWT (Jason Web Tokens). To request a token you can use the Swagger API documentation. Click on the ",(0,a.kt)("inlineCode",{parentName:"p"},"login")," section and select ",(0,a.kt)("inlineCode",{parentName:"p"},"Try out"),". In the request body enter the credentials. Make sure you quote the keys and the values."),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(7886).Z})),(0,a.kt)("p",null,"Click on ",(0,a.kt)("inlineCode",{parentName:"p"},"Execute")," and go to the response body section. Copy the token."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "Authorization": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjoib...."\n}\n')),(0,a.kt)("p",null,"In the Swagger API click on ",(0,a.kt)("inlineCode",{parentName:"p"},"Authorize")," and paste the token. You can now use the other API functions without having to enter authorization information."),(0,a.kt)("h3",{id:"curl"},"Curl"),(0,a.kt)("p",null,"Alternatively you can use ",(0,a.kt)("inlineCode",{parentName:"p"},"curl")," to request an JWT access token."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"curl -X 'POST' \\\n  'https://server.localhost/login' \\\n  -H 'accept: application/json' \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n  \"userName\": \"me\",\n  \"password\": \"secret\"\n}'\n")),(0,a.kt)("p",null,"To test the token you can request all data with topic ",(0,a.kt)("inlineCode",{parentName:"p"},"weather"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"curl -X 'GET' \\\n  'https://server.3d-t.it/states?topic=weather&value=fog' \\\n  -H 'accept: application/json' \\\n  -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjoib...'\n")),(0,a.kt)("p",null,"The result is a JSON array with all state objects:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'[\n{\n  "spacetime": [\n    51.41191,\n    5.44969,\n    0,\n    "2021-11-03T14:45:04.539Z"\n  ],\n  "topic": "weather.eersel.temperature",\n  "updated": "2021-04-06T11:00:01.730Z",\n  "value": 9,\n},\n...\n')))}d.isMDXComponent=!0},7886:function(e,t,n){"use strict";t.Z=n.p+"assets/images/authorization-206ab2e3afff8f9303a4ee72541f5a89.png"}}]);