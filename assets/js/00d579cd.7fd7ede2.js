"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[1175],{91366(e,n,i){i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>m,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"visualization/colormap","title":"Dynamic coloring","description":"Dynamically color 3D building elements using form-defined color tables that map IoT parameter ranges to colors, allowing users to switch between visualizing temperature, humidity, and other metrics.","source":"@site/docs/visualization/colormap.md","sourceDirName":"visualization","slug":"/visualization/colormap","permalink":"/docs/visualization/colormap","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":20,"frontMatter":{"sidebar_position":20,"description":"Dynamically color 3D building elements using form-defined color tables that map IoT parameter ranges to colors, allowing users to switch between visualizing temperature, humidity, and other metrics.","keywords":["color mapping","dynamic coloring","GLTF","digital twin","forms","temperature","humidity","IoT","3D visualization","building"]},"sidebar":"defaultSidebar","previous":{"title":"Fixed color","permalink":"/docs/visualization/color"},"next":{"title":"Light","permalink":"/docs/visualization/lights"}}');var o=i(74848),a=i(28453);const r={sidebar_position:20,description:"Dynamically color 3D building elements using form-defined color tables that map IoT parameter ranges to colors, allowing users to switch between visualizing temperature, humidity, and other metrics.",keywords:["color mapping","dynamic coloring","GLTF","digital twin","forms","temperature","humidity","IoT","3D visualization","building"]},s="Dynamic coloring",l={},c=[{value:"Topics",id:"topics",level:2},{value:"Form",id:"form",level:2},{value:"Model",id:"model",level:2},{value:"Explanation",id:"explanation",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",mermaid:"mermaid",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"dynamic-coloring",children:"Dynamic coloring"})}),"\n",(0,o.jsx)(n.p,{children:"Instead of using a JavaScript expression that defines the color we can also use a color table defined in a form. The advantage of this method is that we can dynamically switch between various parameters defined in the form. In this example, we have a form that displays the temperature and humidity of an area."}),"\n",(0,o.jsx)(n.h2,{id:"topics",children:"Topics"}),"\n",(0,o.jsx)(n.p,{children:"Each area in the model has three topics: a link to the name of the node in the GLTF model, temperature, and humidity. These parameters can be obtained automatically from IoT devices and imported via a connector."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"site.B01.geometry = Building.gltf\nsite.B01.area_1_a_Living.temperature = 22\nsite.B01.area_1_a_Living.humidity = 66\nsite.B01.area_1_a_Living.node = IcfSpace_1_a_Unit_Living\nsite.B01.area_1_b_Living.temperature = 25\nsite.B01.area_1_b_Living.humidity = 30\nsite.B01.area_1_b_Living.node = IcfSpace_1_b_Unit_Living\n"})}),"\n",(0,o.jsx)(n.h2,{id:"form",children:"Form"}),"\n",(0,o.jsxs)(n.p,{children:["Create a new form and include two controls for ",(0,o.jsx)(n.code,{children:"temperature"})," and ",(0,o.jsx)(n.code,{children:"humidity"}),". In the form, you specify how the values are mapped to color names. For example, in the form below a temperature of 15 degrees is converted to ",(0,o.jsx)(n.code,{children:"blue"}),"."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"Apartment Room\n\nReference\n|6\n\nName\n|6\n\nTemperature\n[0|18:blue,18|21:green,21|24:orange,24|30:red 00]\n\nHumidity\n[0|50:grey,70|100:blue 00]\n\nVolume\n[0.00 m3]\n\nArea\n[0.00 m2]\n"})}),"\n",(0,o.jsx)(n.h2,{id:"model",children:"Model"}),"\n",(0,o.jsxs)(n.p,{children:["Create a new model and specify the topics you want to visualize, for example, ",(0,o.jsx)(n.code,{children:"site."}),"B01`.  All subtopics that contain the references to the geometry and nodes are included. Now select the form you want to use for visualization and select one of the parameters in the form. If you change the parameter, the model is automatically updated. If you click on one of the areas in the model the form that shows the parameters of that area is opened."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:i(68564).A+"",width:"1200",height:"750"})}),"\n",(0,o.jsxs)(n.p,{children:["You can now change the coloring scheme by selecting another parameter from the drop-down menu. In this case, we select the parameter ",(0,o.jsx)(n.code,{children:"Humidity"}),". The areas are now colored according to the current value of the ",(0,o.jsx)(n.code,{children:"Humidity"})," subtopics of the area and the color ranges defined for the humidity parameter. You can select any parameter defined in the form that has a numerical value and a color mapping."]}),"\n",(0,o.jsx)(n.h2,{id:"explanation",children:"Explanation"}),"\n",(0,o.jsxs)(n.p,{children:["To apply dynamic coloring the topics are connected to the GLTF model and the nodes in the model. The ",(0,o.jsx)(n.code,{children:"geometry"})," subtopic defines the name of the model and the ",(0,o.jsx)(n.code,{children:"node"})," subtopic defines the name of the node. You can then specify the subtopics that you want to visualize. For example, occupancy, CO2 level, or temperature. The parameter values are converted to colors by using a form that includes color mapping."]}),"\n",(0,o.jsx)(n.mermaid,{value:"flowchart \n    direction RL\n    subgraph Topics\n        Parent[building.b01]\n        Topic[unit_1_a]\n        Geometry[.geometry \\n A.gltf]\n        Temperature[.temperature\\n22 C]\n        Humidity[.humidity\\n 66%]\n        Node[.node \\n1_A]\n        Parent --\x3e Topic\n        Parent --\x3e Geometry\n        Topic --\x3e Node\n        Topic --\x3e Temperature\n        Topic --\x3e Humidity\n    end\n    subgraph GLTF\n        Building[Building \\nA] --\x3e Storey[Storey \\n1]\n        Storey --\x3e Unit[Unit \\n1_A]\n        Storey --\x3e UnitB[Unit \\n1_B]\n        Unit --\x3e Space\n        Unit --\x3e Wall\n        Unit --\x3e Slab\n    end\n    Node --\x3e Space\n    Temperature --Color mapping--\x3e Space\n    Humidity --Color mapping--\x3e Space\n    Geometry --\x3e Building\n    style Parent fill:#fcc\n    style Topic fill:#fcc\n    style Geometry fill:#fcc\n    style Node fill:#fcc\n    style Temperature fill:#fcc\n    style Humidity fill:#fcc"})]})}function m(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},68564(e,n,i){i.d(n,{A:()=>t});const t=i.p+"assets/images/building_color-46025dc2c47b49ab2b617c8cff235ccd.png"},28453(e,n,i){i.d(n,{R:()=>r,x:()=>s});var t=i(96540);const o={},a=t.createContext(o);function r(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);