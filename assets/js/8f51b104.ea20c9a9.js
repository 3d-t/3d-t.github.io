"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[6756],{67262(e,t,s){s.r(t),s.d(t,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"reference/javascript","title":"Scripts","description":"Reference for the JavaScript scripting sandbox, covering built-in packages for state management, HTTP requests, and MQTT messaging used in automation scripts and importers.","source":"@site/docs/reference/javascript.md","sourceDirName":"reference","slug":"/reference/javascript","permalink":"/docs/reference/javascript","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":90,"frontMatter":{"sidebar_position":90,"description":"Reference for the JavaScript scripting sandbox, covering built-in packages for state management, HTTP requests, and MQTT messaging used in automation scripts and importers.","keywords":["JavaScript","scripting","automation","sandbox","state management","HTTP requests","MQTT","IoT","import","publish","subscribe","API","digital twin scripting"]},"sidebar":"defaultSidebar","previous":{"title":"Markdown","permalink":"/docs/reference/markdown"},"next":{"title":"Architecture","permalink":"/docs/technology/architecture"}}');var d=s(74848),n=s(28453);const i={sidebar_position:90,description:"Reference for the JavaScript scripting sandbox, covering built-in packages for state management, HTTP requests, and MQTT messaging used in automation scripts and importers.",keywords:["JavaScript","scripting","automation","sandbox","state management","HTTP requests","MQTT","IoT","import","publish","subscribe","API","digital twin scripting"]},c="Scripts",o={},a=[];function l(e){const t={a:"a",code:"code",h1:"h1",header:"header",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(t.header,{children:(0,d.jsx)(t.h1,{id:"scripts",children:"Scripts"})}),"\n",(0,d.jsxs)(t.p,{children:["All standard JavaScript functions and ECMAScript language constructs are supported in scripts. The scripts are executed in a sandbox Virtual Machine and do not have access to the operating system or Node.js packages. The following packages are supported. All values are returned as promises and can be obtained using the ",(0,d.jsx)(t.code,{children:"await"})," statement. When the functions are used in importers the ",(0,d.jsx)(t.code,{children:"await"})," is automatically included."]}),"\n",(0,d.jsxs)(t.table,{children:[(0,d.jsx)(t.thead,{children:(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.th,{children:"Package"}),(0,d.jsx)(t.th,{children:"Function"}),(0,d.jsx)(t.th,{children:"Returns"}),(0,d.jsx)(t.th,{children:"Parameter"}),(0,d.jsx)(t.th,{children:"Example"})]})}),(0,d.jsxs)(t.tbody,{children:[(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.strong,{children:"general"})}),(0,d.jsx)(t.td,{children:"print(message)"}),(0,d.jsx)(t.td,{children:"void"}),(0,d.jsx)(t.td,{children:"message"}),(0,d.jsx)(t.td,{children:"'Hello Earth'"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"error(message)"}),(0,d.jsx)(t.td,{children:"void"}),(0,d.jsx)(t.td,{children:"message"}),(0,d.jsx)(t.td,{children:"'No object found'"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"sleep(seconds)"}),(0,d.jsx)(t.td,{children:"void"}),(0,d.jsx)(t.td,{children:"seconds"}),(0,d.jsx)(t.td,{children:"5"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.strong,{children:"state"})}),(0,d.jsx)(t.td,{children:"state.get(topic)"}),(0,d.jsx)(t.td,{children:"state"}),(0,d.jsx)(t.td,{children:"topic"}),(0,d.jsx)(t.td,{children:"'asset.hvac.bosch.temperature'"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"state.set(topic, value)"}),(0,d.jsx)(t.td,{children:"void"}),(0,d.jsx)(t.td,{children:"topic"}),(0,d.jsx)(t.td,{children:"'weather.eindhoven.pressure'"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"void"}),(0,d.jsx)(t.td,{children:"value"}),(0,d.jsx)(t.td,{children:"1013"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.strong,{children:"http"})}),(0,d.jsx)(t.td,{children:"http.get(url)"}),(0,d.jsx)(t.td,{children:"body"}),(0,d.jsx)(t.td,{children:"url"}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.a,{href:"https://google.com",children:"https://google.com"})})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"http.post(url, data[, options])"}),(0,d.jsx)(t.td,{children:"body"}),(0,d.jsx)(t.td,{children:"url"}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.a,{href:"https://app.mydomain.com/login",children:"https://app.mydomain.com/login"})})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"body"}),(0,d.jsx)(t.td,{children:"data"}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:'{"username": "bob"}'})})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"body"}),(0,d.jsx)(t.td,{children:"options"}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:'{"headers": ["Content-Type", "application/json"]}'})})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"http.request(options)"}),(0,d.jsx)(t.td,{children:"response"}),(0,d.jsx)(t.td,{children:"options"}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:'{url: "https://app.mydomain.com/login"}'})})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"response"}),(0,d.jsx)(t.td,{children:"options"}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:'{"headers": ["Content-Type", "application/json"]}'})})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"response"}),(0,d.jsx)(t.td,{children:"options"}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"{maxRedirects: 0}"})})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.strong,{children:"mqtt"})}),(0,d.jsx)(t.td,{children:"mqtt.get(topic)"}),(0,d.jsx)(t.td,{children:"text"}),(0,d.jsx)(t.td,{children:"topic"}),(0,d.jsx)(t.td,{children:"'/building_a/room_b/temperature'"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"mqtt.publish(topic, message [, options])"}),(0,d.jsx)(t.td,{children:"text"}),(0,d.jsx)(t.td,{children:"topic"}),(0,d.jsx)(t.td,{children:"'/building_a/room_b/temperature'"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"text"}),(0,d.jsx)(t.td,{children:"message"}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:'{"temperature", 12}'})})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"text"}),(0,d.jsx)(t.td,{children:"options"}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"{qos: 1}"})})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"text"}),(0,d.jsx)(t.td,{children:"options"}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"{retain: true}"})})]})]})]})]})}function h(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,d.jsx)(t,{...e,children:(0,d.jsx)(l,{...e})}):l(e)}},28453(e,t,s){s.d(t,{R:()=>i,x:()=>c});var r=s(96540);const d={},n=r.createContext(d);function i(e){const t=r.useContext(n);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:i(e.components),r.createElement(n.Provider,{value:t},e.children)}}}]);