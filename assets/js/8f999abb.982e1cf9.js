"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[8189],{3094(e,t,n){n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"drawings/interactive","title":"Links","description":"Creating interactive parametric SVG drawings with clickable links that update drawing parameters on user input, demonstrated with a seat selector and an irrigation control diagram.","source":"@site/docs/drawings/interactive.md","sourceDirName":"drawings","slug":"/drawings/interactive","permalink":"/docs/drawings/interactive","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":200,"frontMatter":{"sidebar_position":200,"description":"Creating interactive parametric SVG drawings with clickable links that update drawing parameters on user input, demonstrated with a seat selector and an irrigation control diagram.","keywords":["interactive SVG","parametric drawings","links","seat selector","irrigation diagram","user input","SpaceTime"]},"sidebar":"defaultSidebar","previous":{"title":"Libraries","permalink":"/docs/drawings/libraries"},"next":{"title":"Monitoring","permalink":"/docs/drawings/monitoring"}}');var a=n(74848),s=n(28453);const r={sidebar_position:200,description:"Creating interactive parametric SVG drawings with clickable links that update drawing parameters on user input, demonstrated with a seat selector and an irrigation control diagram.",keywords:["interactive SVG","parametric drawings","links","seat selector","irrigation diagram","user input","SpaceTime"]},o="Links",c={},d=[{value:"Text",id:"text",level:2},{value:"Object",id:"object",level:2}];function l(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"links",children:"Links"})}),"\n",(0,a.jsx)(t.p,{children:"In the previous sections we have shown how to create parametric SVG drawings that can reconfigure themselves based on IoT parameters. In this section we will show how to create interactive drawings that can reconfigure themselves based on user input by defining links in the drawing. When clicking on a link, the URL with the original parameters is replaced with the URL that has the new parameters. A visual feedback in the drawing is obtained by changing the color of the elements in the drawing depending on the parameters that are provided to the script via the URL."}),"\n",(0,a.jsx)(t.h2,{id:"text",children:"Text"}),"\n",(0,a.jsxs)(t.p,{children:["This example shows how to create a seat selector that updates itself after the user clicks on a seat. The state of the seat selector is stored in a variable called 'occupied'. This variable is a string of comma separated seat numbers. The seat numbers consist of a row number and a seat number (A-F). The seats are generated by two loops. Inside the loop the seat number (e.g. \"3A\") is generated. If the seat number is included in the variable 'occupied' the background color is changed to 'grey'. Otherwise, the background color is changed to 'light green'. If the seat number is not included in the variable 'occupied' a ",(0,a.jsx)(t.code,{children:"link"})," is created that represents the new state of the variable 'occupied'. This is done by adding the seat number to the string 'occupied'."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:'link("\'" + occupied + "\', \'" + label + "\'")\n'})}),"\n",(0,a.jsxs)(t.p,{children:["For example, assume the current value of ",(0,a.jsx)(t.code,{children:"occupied"})," to be",(0,a.jsx)(t.code,{children:"1A, 1B, 2A, 7E, 7F"}),". The argument to the ",(0,a.jsx)(t.code,{children:"link"})," function for seat ",(0,a.jsx)(t.code,{children:"6A"})," will be as follows:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"link('1A, 1B, 2A, 7E, 7F' + ', ' + '6A') // link('1A, 1B, 2A, 7E, 7F, 6A')  \n"})}),"\n",(0,a.jsxs)(t.p,{children:["A link will be added to all subsequent SVG elements in the current block, in this case the ",(0,a.jsx)(t.code,{children:"text"})," element. When the user clicks on the link the page is reloaded with the same URL and new state of the parameter for the ",(0,a.jsx)(t.code,{children:"Seat selector"})," function:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-xml",children:"<text onclick=\"window.location.href =`http://localhost:8010/drawing/svg/Seat selector('1A, 1B, 2A, 7E, 7F, 6A')`\">6A</text>\n"})}),"\n",(0,a.jsxs)(t.p,{children:["The SVG is automatically generated based on the new value of the variable 'occupied' which now includes seat ",(0,a.jsx)(t.code,{children:"6A"}),". Because of the logic define in the script, the seat is now displayed in a grey color."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:n(50741).A+"",width:"2500",height:"1500"})}),"\n",(0,a.jsx)(t.h2,{id:"object",children:"Object"}),"\n",(0,a.jsxs)(t.p,{children:["This example shows how to create an irrigation diagram that can be reconfigured based on user input. The state of the diagram is stored in the JavaScript object ",(0,a.jsx)(t.code,{children:"state"}),". This is an object with fields for the value of the pump and three valves. In this example, the values ",(0,a.jsx)(t.code,{children:"0"})," and ",(0,a.jsx)(t.code,{children:"1"})," mean ",(0,a.jsx)(t.code,{children:"off"})," or ",(0,a.jsx)(t.code,{children:"on"})," for the pump and ",(0,a.jsx)(t.code,{children:"closed"})," and ",(0,a.jsx)(t.code,{children:"open"})," for the valves. Depending on the state of the pump, the line color to the three valves are ",(0,a.jsx)(t.code,{children:"blue"})," or ",(0,a.jsx)(t.code,{children:"black"}),". A ",(0,a.jsx)(t.code,{children:"link"})," statement is used specify the new state of the user clicks on the part called ",(0,a.jsx)(t.code,{children:"Pump"}),". In this example we use the JavaScript spread operator, which sets the new value of ",(0,a.jsx)(t.code,{children:"state"})," by copying all fields from the current value using the ",(0,a.jsx)(t.code,{children:"..."})," operator. A ternary statement is used to toggle the value of the pump depending on the current value."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:'{\n    translate(100,10)\n    link({...state, pump: pump === 1 ? 0 : 1})\n    part("Pump")\n}\n'})}),"\n",(0,a.jsxs)(t.p,{children:["When a ",(0,a.jsx)(t.code,{children:"link"})," function is called, the link is added to all geometry that is created next, in this case it is added to all elements in the part. To cancel adding links you can either call the function again with an empty value ",(0,a.jsx)(t.code,{children:'link("")'})," or enter the ",(0,a.jsx)(t.code,{children:"link"})," statement inside a block statement as shown above. Like with other settings such as ",(0,a.jsx)(t.code,{children:"fill"})," and ",(0,a.jsx)(t.code,{children:"color"}),", the link is only applied to elements created in the block statement. In the example below the first valve is set to ",(0,a.jsx)(t.code,{children:"1"})," or ",(0,a.jsx)(t.code,{children:"open"})," and the other two valves are closed. Then the user clicks on the second and third valve their status is toggled. The SVG is automatically updated to reflect the new value of ",(0,a.jsx)(t.code,{children:"state"})," by showing the flow of water as blue lines. When the user clicks on the ",(0,a.jsx)(t.code,{children:"pump"}),", the pump is shut off and the water flow is stopped."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:n(84461).A+"",width:"2500",height:"1500"})}),"\n",(0,a.jsxs)(t.p,{children:["When the design of the drawing is complete, you can embed the SVG in a web page using an ",(0,a.jsx)(t.code,{children:"<img>"})," tag. You can open the URL directly in a web browser with an optional parameter that defines the initial state."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"http://localhost:8010/drawings/svg/Irrigation({pump:0,valve1:1})\n"})})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},84461(e,t,n){n.d(t,{A:()=>i});const i=n.p+"assets/images/drawings_interactive_irrigation-d797ab7c77714599cdbbd601ffafd810.png"},50741(e,t,n){n.d(t,{A:()=>i});const i=n.p+"assets/images/drawings_interactive_seatselector-781a0b2044ad37ddffcd492d60250f1d.png"},28453(e,t,n){n.d(t,{R:()=>r,x:()=>o});var i=n(96540);const a={},s=i.createContext(a);function r(e){const t=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);