(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7333],{3905:function(e,t,r){"use strict";r.d(t,{Zo:function(){return p},kt:function(){return h}});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var c=n.createContext({}),l=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},p=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=l(r),h=a,m=d["".concat(c,".").concat(h)]||d[h]||u[h]||i;return r?n.createElement(m,o(o({ref:t},p),{},{components:r})):n.createElement(m,o({ref:t},p))}));function h(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,o=new Array(i);o[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var l=2;l<i;l++)o[l]=r[l];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},215:function(e,t,r){"use strict";r.r(t),r.d(t,{frontMatter:function(){return s},contentTitle:function(){return c},metadata:function(){return l},toc:function(){return p},default:function(){return d}});var n=r(2122),a=r(9756),i=(r(7294),r(3905)),o=["components"],s={sidebar_position:120},c="Tesla",l={unversionedId:"integrations/tesla",id:"integrations/tesla",isDocsHomePage:!1,title:"Tesla",description:"Tesla is a manufacturer of electric vehicles. Owners can access their car via the Tesla app, for example to open doors, set the temperature or start charging. There is unoffical API that is used by the Android and IOS apps. This docker web service for the Tesla integration uses the Python open source TeslaPy package.",source:"@site/docs/integrations/tesla.md",sourceDirName:"integrations",slug:"/integrations/tesla",permalink:"/docs/integrations/tesla",version:"current",sidebarPosition:120,frontMatter:{sidebar_position:120},sidebar:"defaultSidebar",previous:{title:"Nefit",permalink:"/docs/integrations/nefit"},next:{title:"Crawler",permalink:"/docs/integrations/crawler"}},p=[{value:"Web service",id:"web-service",children:[]},{value:"Data source",id:"data-source",children:[]},{value:"Importer",id:"importer",children:[]},{value:"Exporter",id:"exporter",children:[]}],u={toc:p};function d(e){var t=e.components,s=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,n.Z)({},u,s,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"tesla"},"Tesla"),(0,i.kt)("p",null,"Tesla is a manufacturer of electric vehicles. Owners can access their car via the Tesla app, for example to open doors, set the temperature or start charging. There is ",(0,i.kt)("a",{parentName:"p",href:"https://tesla-api.timdorr.com/"},"unoffical API")," that is used by the Android and IOS apps. This docker web service for the Tesla integration uses the Python open source ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/tdorssers/TeslaPy"},"TeslaPy")," package."),(0,i.kt)("h2",{id:"web-service"},"Web service"),(0,i.kt)("p",null,"To install the Tesla web service on your local cluster run: "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"helm install 3d-t/tesla tesla\n")),(0,i.kt)("p",null,"Perform a one-time manual authentication by listing the name of the tesla pod and executing a command with the email adress for your Tesla account:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"kubectl get pods\nkubectl exec -it <tesla> python3 register.py <your_email>\n")),(0,i.kt)("p",null,"Copy the URL into a web browser and enter your username and password. Copy the URL and paste to the command line.\nVerify that the authentication is succesful:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"}," kubectl exec -it <tesla> cat cache.json\n")),(0,i.kt)("h2",{id:"data-source"},"Data source"),(0,i.kt)("p",null,"In the field ",(0,i.kt)("inlineCode",{parentName:"p"},"service")," enter the hostname of where the Tesla webservice is running locally, such as ",(0,i.kt)("inlineCode",{parentName:"p"},"tesla.mydomain.com"),". The field ",(0,i.kt)("inlineCode",{parentName:"p"},"username")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"password")," enter the same information as used in the app."),(0,i.kt)("p",null,(0,i.kt)("img",{src:r(2210).Z})),(0,i.kt)("h2",{id:"importer"},"Importer"),(0,i.kt)("p",null,"In the importer specify the secret that contains the Tesla data source and add a mapping for each device. The object ID is the VIN (Vehicle Identification Number) of the car. There is a custom field ",(0,i.kt)("inlineCode",{parentName:"p"},"charging")," which is not supplied by the input data but is set to ",(0,i.kt)("inlineCode",{parentName:"p"},"0")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"1")," depending on the charging power. This field will be used to start or stop the charging process. The field ",(0,i.kt)("inlineCode",{parentName:"p"},"charge_level_soc"),", which indicates the user selected charging level, is renamed to ",(0,i.kt)("inlineCode",{parentName:"p"},"charge_level"),". Furthermore, the ",(0,i.kt)("inlineCode",{parentName:"p"},"odometer")," field has a conversion factor from miles to kilometers."),(0,i.kt)("p",null,(0,i.kt)("img",{src:r(1014).Z})),(0,i.kt)("h2",{id:"exporter"},"Exporter"),(0,i.kt)("p",null,"The exporter contains an entry for setting the ",(0,i.kt)("inlineCode",{parentName:"p"},"charge_level")," and for starting and stopping the charging process via the key ",(0,i.kt)("inlineCode",{parentName:"p"},"charging"),". For security reasons some commands like opening the doors and starting the car are not enabled in the API but these can be added if necessary."),(0,i.kt)("p",null,(0,i.kt)("img",{src:r(8505).Z})))}d.isMDXComponent=!0},8505:function(e,t,r){"use strict";t.Z=r.p+"assets/images/exporter_tesla-96f0b98cf079390e925115b7c1e8a31e.png"},1014:function(e,t,r){"use strict";t.Z=r.p+"assets/images/importer_tesla-27a34e30fc9e665b63402695f7f90c2d.png"},2210:function(e,t,r){"use strict";t.Z=r.p+"assets/images/secret_tesla-758c6d91be9f05ee289efd58b7b89e95.png"}}]);